# 使用指南

## 登录服务

查看日志，找到日志中的`Token`，为服务登录密码

如使用docker compose部署，使用这个命令查看日志

```bash
docker compose logs
```

日志输出例如

```
"--- CONIF ---"
"Addr: https://xxxxx"
"Token: hh1xQC6Uqy" // 密码在这里
"--- CONIF ---"
```

其他部署方式自行查看日志，参考[部署指南](deploy)

在页面`RSS_TOKEN`处填写密码，点击`确定`

如需修改密码，到服务配置处修改`RSS_TOKEN`后，点击保存即可

## 登录微信账号

服务通过读书获取公众号信息，如果未使用过，需要先安装注册微信读书

### 注册微信读书授权

安装微信读书，使用微信登录

在微信中打开任意一篇公众号文章，点击分享，选择`在微信读书中阅读`

按照提示完成微信读书授权

### 在服务中登录微信账号

在`微信账号`中，点击`添加账号`后微信扫码登录

如果手机端提示异地登陆验证，请在网页中填写提交

### 账号管理

账号状态有两个信息

- **登录是否正常**

如果异常需要重新添加并登录（不用删除）

- **是否在风控中**

如果显示风控中，无法使用这个账号抓取数据

自然状态下，可能一段时间后会自动解除风控（时间从几小时到几天不定），也可手动解除风控

可以[配置告警](#配置服务异常告警)接收异常通知

### 手动解除风控

需要进行以下操作

1. 在微信读书中的书架页打开`文章收藏`
2. 如有授权提示，需要根据提示进行授权
3. 在收藏列表中点击任意一个**公众号的名称**，注意：是点名称，不是点文章标题
4. 点击后进入公众号**文章列表页**，页面**会显示该公众号所有文章**，以及更新信息，根据提示进行操作

> [!TIP]
> 如果没有`文章收藏`，需要按照[注册微信读书授权](#注册微信读书授权)步骤操作

> [!TIP] 常用微信号不容易触发风控

> [!TIP] 如果想解除风控后该账号立即可用，在页面中点击对应账号的`刷新风控`按钮，但不推荐

## 订阅管理

### 文章链接订阅

填入公众号文章链接后，点击订阅

订阅成功后下方会显示订阅地址

如果发生报错，可以尝试重试

### 公众号ID订阅

浏览器打开公众号文章，`f12`打开控制台，输入以下代码获得一串数字，即公众号ID

```js
atob(biz)
```

## 服务管理

可以在`服务配置`页，配置以下功能

### 配置服务异常告警

当服务遇到被微信风控/账号异常，服务运行异常等情况，会发送告警信息

目前支持以下渠道

配置[BOT_TG_TOKEN](./config#bot-tg-token)，使用Telegram Bot告警

配置[BOT_SERVER_KEY](./config#bot-server-key)，使用[Server酱](https://sct.ftqq.com/)告警

配置[BOT_WEBHOOK_URL](./config#bot-server-key)，使用Webhook告警

配置[BOT_BARK_URL](./config#bot-server-key)，使用[Bark](https://bark.day.app/)告警（iOS用户推荐）

### 权限管理

配置[RSS_TOKEN](./config#rss-token)对订阅管理进行鉴权

配置[RSS_ENC_FEED_ID](./config#rss-enc-feed-id)，对订阅地址进行加密
